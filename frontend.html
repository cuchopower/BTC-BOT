<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>SeÃ±ales de Trading BTC</title>
</head>
<body>
  <h1>SeÃ±al Actual del Bot</h1>
  <div id="signal">Cargando...</div>
  <h2>ğŸ“Š Ãšltimas 5 SeÃ±ales</h2>
  <div id="history">Cargando historial...</div>

  <script>
    async function cargarDatos() {
      try {
        const res = await fetch('/signal');
        const data = await res.json();
        let html = `<p><strong>${data.signal}</strong></p>
                    <p>ğŸ’µ Precio: $${parseFloat(data.price).toFixed(2)}</p>
                    <p>ğŸ“ˆ Confianza: ${data.confidence}</p>`;

        if (data.signal !== "â¸ï¸ NEUTRO") {
          html += `<p>ğŸ¯ TP: $${parseFloat(data.tp).toFixed(2)}</p>
                   <p>ğŸ›‘ SL: $${parseFloat(data.sl).toFixed(2)}</p>`;
        }

        html += `<p>âœ… PrecisiÃ³n modelo: ${data.accuracy}%</p>
                 <p>ğŸ“Š F1-score: ${data.f1_score}%</p>`;

        document.getElementById("signal").innerHTML = html;
      } catch (error) {
        document.getElementById("signal").innerHTML = "âŒ Error al obtener seÃ±al.";
      }

      try {
        const resHist = await fetch('/history');
        const history = await resHist.json();
        let histHtml = "";
        history.slice().reverse().forEach(item => {
          histHtml += `<p>${item.time} - ${item.signal} - $${item.price} - ${item.confidence}</p>`;
        });
        document.getElementById("history").innerHTML = histHtml;
      } catch (e) {
        document.getElementById("history").innerHTML = "âŒ Error al cargar historial.";
      }
    }

    cargarDatos();
    setInterval(cargarDatos, 60000);
  </script>
</body>
</html>













