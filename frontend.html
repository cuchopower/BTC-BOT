<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Señales de Trading BTC</title>
</head>
<body>
  <h1>Señal Actual del Bot</h1>
  <div id="signal">Cargando...</div>
  <h2>📊 Últimas 5 Señales</h2>
  <div id="history">Cargando historial...</div>

  <script>
    async function cargarDatos() {
      try {
        const res = await fetch('/signal');
        const data = await res.json();
        let html = `<p><strong>${data.signal}</strong></p>
                    <p>💵 Precio: $${parseFloat(data.price).toFixed(2)}</p>
                    <p>📈 Confianza: ${data.confidence}</p>`;

        if (data.signal !== "⏸️ NEUTRO") {
          html += `<p>🎯 TP: $${parseFloat(data.tp).toFixed(2)}</p>
                   <p>🛑 SL: $${parseFloat(data.sl).toFixed(2)}</p>`;
        }

        html += `<p>✅ Precisión modelo: ${data.accuracy}%</p>
                 <p>📊 F1-score: ${data.f1_score}%</p>`;

        document.getElementById("signal").innerHTML = html;
      } catch (error) {
        document.getElementById("signal").innerHTML = "❌ Error al obtener señal.";
      }

      try {
        const resHist = await fetch('/history');
        const history = await resHist.json();
        let histHtml = "";
        history.slice().reverse().forEach(item => {
          histHtml += `<p>${item.time} - ${item.signal} - $${item.price} - ${item.confidence}</p>`;
        });
        document.getElementById("history").innerHTML = histHtml;
      } catch (e) {
        document.getElementById("history").innerHTML = "❌ Error al cargar historial.";
      }
    }

    cargarDatos();
    setInterval(cargarDatos, 60000);
  </script>
</body>
</html>













